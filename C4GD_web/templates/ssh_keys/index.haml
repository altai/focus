-extends "projects_base.haml"
-block subnav
  =super()
  -include "ssh_keys/_subnav.haml"
-block content
  %span class="label label-important"
    Important: 'delete' actions cannot be reverted 
  %table.table.table-striped.table-bordered.table-condensed style="margin-top: 5px;"
    %thead
      %tr
        %th
          Key Name
        %th
          Fingerprint
        %th
          Public_key
        %th
          Actions
    %tbody
      -for key in keys:
        %tr
          %td
            "{{ key.name }}"
          %td
            "{{ key.fingerprint }}"
          %td
            %div.modal.hide id="show_key_{{ key.name }}"
              %div.modal-header
                %a.close data-dismiss="modal"
                  ×
                %h3
                  Public Key for {{ key.name }}
              %div.modal-body
                %textarea.input-xlarge rows="3" style="width: 521px; height: 105px;/* ad hoc */" ->  =key.public_key
              %div.modal-footer
                %a.btn.btn-primary href="#" data-dismiss="modal"
                  OK
            %a data-toggle="modal" href="#show_key_{{ key.name }}"
              show
          %td
            %div.modal.hide id="delete_key_{{ key.name }}"
              %div.modal-header
                %a.close data-dismiss="modal"
                  ×
                %h3
                  Confirmation request
              %div.modal-body
                %p
                  Sure to delete "{{ key['name'] }}"?
              %div.modal-footer
                %form method="post" action="{{ url_for('.delete', name=key.name) }}"
                  =delete_form.hidden_tag()
                  %button.btn
                    Delete
                  %a.btn.btn-primary href="#" data-dismiss="modal"
                    No
            %a data-toggle="modal" href="#delete_key_{{ key.name }}"
              delete
